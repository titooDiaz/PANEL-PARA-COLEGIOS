{% load tailwind_tags %}
{% load static %}
  <head>
    {% tailwind_css %}
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nombre del colegio</title>
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
    <!-- Font Awesome Icons -->
    <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
    <!-- Popper -->
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <!--Icon-->
    <link rel="icon" href="{% static 'img/logo.png' %}" type="image/x-icon">
  </head>

  <body class="bg-gray-100">
      <div class="flex h-screen">
          <!-- Navbar Lateral -->
          <aside class="hidden bg-red-600 text-white w-60 lg:flex lg:flex-col fixed h-screen overflow-y-auto rounded-3xl border-8 border-gray-100 bg-no-repeat" style="background-image: url('https://static.vecteezy.com/system/resources/previews/008/423/765/non_2x/abstract-colorful-orange-wave-background-vector.jpg');">
              <!-- Logo -->
              <div class="p-4 text-2xl font-semibold">NOMBRE DEL COLEGIO</div>
  
              <!-- Menú de Navegación -->
              <nav class="flex-1">
                  <ul class="space-y-2 ml-4">
                      <li class="bg-gray-100 text-black rounded-l-lg">
                          <a href="#" class="block p-4 transition duration-300">
                              <i class="fas fa-home mr-2"></i> Inicio
                          </a>
                      </li>
                      <li>
                          <a href="#" class="block p-4 hover:bg-gray-700 transition duration-300 rounded-lg">
                            <i class="fas fa-calendar mr-2"></i> Calendario
                          </a>
                      </li>
                      <li>
                          <a href="#" class="block p-4 hover:bg-gray-700 transition duration-300 rounded-lg">
                            <i class="fas fa-envelope mr-2"></i> Mensajes
                          </a>
                      </li>
                      <li>
                          <a href="#" class="block p-4 hover:bg-gray-700 transition duration-300 rounded-lg">
                            <i class="fas fa-user mr-2"></i> Personas
                          </a>
                      </li>
                      <li>
                        <a href="#" class="block p-4 hover:bg-gray-700 transition duration-300 rounded-lg">
                          <i class="fas fa-book mr-2"></i> Notas
                        </a>
                      </li>
                  </ul>
              </nav>
  
              <!-- Pie de Página del Navbar -->
              <footer class="p-4 text-sm text-white">
                  © <script>
                    document.write(new Date().getFullYear() + " MDKJ-F");
                  </script>
    
              </footer>
          </aside>
  
          <!-- Contenido Principal -->
          <main class="flex-grow p-2 lg:ml-60"> 
            <div class="w-full bg-red-600 rounded-xl bg-no-repeat" style="background-image: url('https://static.vecteezy.com/system/resources/previews/008/423/765/non_2x/abstract-colorful-orange-wave-background-vector.jpg');">
              <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
                <div class="flex items-center justify-center w-full mb-4 lg:mb-0 lg:w-auto">
                  <a href="#" class="flex items-center">
                      <img src="{% static 'img/logo.png' %}" class="h-8 mr-3" alt="MDKJ-F" />
                      <span class="self-center text-2xl font-semibold whitespace-nowrap text-white">MDKJ-F</span>
                  </a>
              </div>
              <div class="flex flex-wrap items-center justify-between w-full lg:w-auto">   
              
              <div class="flex items-center mr-4">
                <div>
                    <button type="button"  id="user-menu-button"
                    class="myButton block px-2 py-2 font-semibold text-sm text-white px-4 rounded-lg bg-orange-600 border-l border-r border-t border-4 border-orange-800 transition duration-300 ease-in-out focus:border focus:mt-1">
                      <img class="w-5 h-5 scale-150 rounded-full border border-orange-800 inline-block mr-4" src="{{ request.user.customuseralumno.foto.url }}" alt="user photo">{{ request.user.customuseralumno.first_name }} {{ request.user.customuseralumno.last_name }}
                    </button>


                    <div class="z-50 hidden my-2 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow" id="user-dropdown">
                      <div class="px-4 py-3">
                        <span class="block text-sm text-gray-900 ">* {{ request.user.customuseralumno.tipo_usuario }} *</span>
                        <span class="block text-sm  text-gray-500 truncate ">{{ request.user.customuseralumno.email }}</span>
                      </div>
                      <ul class="py-2" aria-labelledby="user-menu-button">
                        <li>
                          <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Perfil</a>
                        </li>
                        <li>
                          <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Ajustes</a>
                        </li>
                        <li>
                          <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Ayuda</a>
                        </li>
                        <li>
                          <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Salir</a>
                        </li>
                      </ul>

                      <script>
                        document.addEventListener("DOMContentLoaded", function() {
                        const userMenuButton = document.getElementById("user-menu-button");
                        const userDropdown = document.getElementById("user-dropdown");
                    
                        // Agregamos un controlador de eventos click al botón de la imagen
                        userMenuButton.addEventListener("click", function(event) {
                            // Prevenir que el clic del botón se propague al documento
                            event.stopPropagation();
                    
                            // Cambiamos la visibilidad del menú
                            userDropdown.classList.toggle("fixed");
                    
                            // Si el menú está visible, mostramos el menú
                            if (!userDropdown.classList.contains("fixed")) {
                                userDropdown.style.display = "none";
                            } else {
                                userDropdown.style.display = "block";
                            }
                        });
                        //cic afuera
                        document.addEventListener("click", function(event) {
                            // Verificamos si el clic ocurrió fuera del menú
                            if (userDropdown.classList.contains("fixed") && !userDropdown.contains(event.target)) {
                                // Cerramos el menú
                                userDropdown.classList.remove("fixed");
                                userDropdown.style.display = "none";
                            }
                        });
                    });
                      </script>


                    </div>
                  </div>
                </div>

                
                  <button 
                    type="button" 
                    class="flex lg:hidden items-center myButton block px-2 py-2 font-semibold text-sm text-white px-4 rounded-lg bg-orange-600 border-l border-r border-t border-4 border-orange-800 hover:scale-105 transition duration-300 ease-in-out focus:border focus:mt-1">
                    <i class="fas fa-bars"></i>
                  </button>

                  <button 
                    type="button" 
                    class="hidden lg:flex items-center myButton block p-2 font-semibold text-sm text-white px-4 rounded-lg bg-orange-600 border-l border-r border-t border-4 border-orange-800 hover:scale-105 transition duration-300 ease-in-out focus:border focus:mt-1">
                    <i class="fas fa-question text-md"></i>
                  </button>

              <script>
                  const myButtons = document.querySelectorAll('.myButton');   
                  myButtons.forEach((button) => {
                    button.addEventListener('click', () => {
                      setTimeout(() => {
                        button.blur();
                      }, 100);
                    });
                  });
              </script> 

              </div>
              </div>
            </div>
            <br>
        </main>
      </div>
  </body>
  </html>